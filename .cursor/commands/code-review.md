# 代码评审清单

## 概述

用于进行全面代码评审的清单，确保质量、安全性和可维护性。基于Spring Boot + MyBatis Plus + MySQL技术栈的最佳实践。

## 评审类别

### 功能

- [ ] 代码按预期运行
- [ ] 已覆盖边界情况
- [ ] 错误处理适当
- [ ] 无明显缺陷或逻辑错误
- [ ] 业务逻辑正确性
- [ ] 数据一致性保证
- [ ] 并发安全性
- [ ] 幂等性实现

### 代码质量

- [ ] 代码可读、结构清晰
- [ ] 函数小而专注（≤50行）
- [ ] 变量命名清晰、具描述性
- [ ] 无重复代码
- [ ] 没有过度设计
- [ ] 遵循项目规范
- [ ] 圈复杂度≤10
- [ ] 方法参数≤5个
- [ ] 单文件≤500行
- [ ] 优先早返回，避免深层嵌套

### 安全

- [ ] 无明显安全漏洞
- [ ] 具有输入校验
- [ ] 正确处理敏感数据
- [ ] 无硬编码密钥
- [ ] 防止SQL注入
- [ ] 防止XSS攻击
- [ ] 身份验证安全
- [ ] 授权配置正确
- [ ] 敏感信息脱敏

### 性能

- [ ] 无性能瓶颈
- [ ] 数据库查询优化
- [ ] 缓存使用合理
- [ ] 避免N+1查询
- [ ] 分页查询实现
- [ ] 批量操作优化
- [ ] 连接池配置合理

### 测试

- [ ] 单元测试覆盖
- [ ] 集成测试覆盖
- [ ] 边界条件测试
- [ ] 异常情况测试
- [ ] 测试数据准备
- [ ] 测试用例命名清晰

### 架构设计

- [ ] 分层架构清晰
- [ ] 依赖注入正确
- [ ] 接口设计合理
- [ ] 模块边界明确
- [ ] 配置管理规范
- [ ] 异常处理统一

### 数据库设计

- [ ] 表结构合理
- [ ] 索引设计优化
- [ ] 字段类型合适
- [ ] 约束条件完整
- [ ] 命名规范统一
- [ ] 审计字段完整

### 日志和监控

- [ ] 日志级别合适
- [ ] 敏感信息不记录
- [ ] 异常日志完整
- [ ] 业务日志清晰
- [ ] 监控指标完善
- [ ] 链路追踪完整

## 评审流程

### 1. 预评审

- [ ] 代码已通过静态检查
- [ ] 单元测试通过
- [ ] 代码格式化完成
- [ ] 提交信息规范

### 2. 功能评审

- [ ] 需求理解正确
- [ ] 实现方案合理
- [ ] 边界条件处理
- [ ] 错误场景覆盖

### 3. 代码评审

- [ ] 代码结构清晰
- [ ] 命名规范统一
- [ ] 注释完整准确
- [ ] 重复代码消除

### 4. 安全评审

- [ ] 安全漏洞检查
- [ ] 敏感信息保护
- [ ] 输入验证完整
- [ ] 权限控制正确

### 5. 性能评审

- [ ] 性能指标达标
- [ ] 资源使用合理
- [ ] 扩展性良好
- [ ] 监控完善

## 常见问题检查

### 代码质量问题

- [ ] 方法过长（>50行）
- [ ] 类过大（>500行）
- [ ] 参数过多（>5个）
- [ ] 圈复杂度过高（>10）
- [ ] 重复代码
- [ ] 过度设计
- [ ] 死代码
- [ ] 魔法数字

### 安全问题

- [ ] 硬编码密钥
- [ ] SQL注入风险
- [ ] XSS漏洞
- [ ] 敏感信息泄露
- [ ] 权限绕过
- [ ] 输入验证不足

### 性能问题

- [ ] 数据库查询未优化
- [ ] 缺少索引
- [ ] 内存泄漏
- [ ] 资源未释放
- [ ] 缓存使用不当
- [ ] 批量操作效率低

## 评审标准

### 必须修复（P0）

- 安全漏洞
- 功能缺陷
- 性能严重问题
- 数据一致性问题

### 建议修复（P1）

- 代码质量问题
- 性能优化机会
- 可维护性问题
- 测试覆盖不足

### 可选优化（P2）

- 代码风格问题
- 注释完善
- 文档更新
- 重构机会

## 评审工具

### 静态分析

- [ ] SonarQube检查
- [ ] Spotless格式化
- [ ] Checkstyle检查
- [ ] PMD分析

### 安全扫描

- [ ] OWASP依赖检查
- [ ] 安全漏洞扫描
- [ ] 敏感信息检测
- [ ] 权限配置检查

### 性能测试

- [ ] 单元测试性能
- [ ] 集成测试性能
- [ ] 压力测试
- [ ] 内存分析

## 评审记录

### 评审信息

- 评审人：__
- 评审日期：__
- 评审版本：__
- 评审范围：__

### 问题记录

| 问题类型 | 严重程度 | 问题描述 | 修复建议 | 状态 |
| :------- | :------- | :------- | :------- | :--- |
|          |          |          |          |      |

### 评审结论

- [ ] 通过
- [ ] 有条件通过
- [ ] 不通过

### 后续行动

- [ ] 修复P0问题
- [ ] 修复P1问题
- [ ] 考虑P2优化
- [ ] 补充测试用例
- [ ] 更新文档